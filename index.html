<html>
  <head>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-super-keyboard@1.0.0/dist/aframe-super-keyboard.min.js"></script>
    <script src="https://unpkg.com/aframe-state-component@7.1.0/dist/aframe-state-component.min.js"></script>

    <script src="https://unpkg.com/aframe-log-component/dist/aframe-log-component.min.js"></script>

    <script src="./scripts/api.js"></script>
    <script src="./scripts/state.js"></script>
    <script src="./scripts/keyboard.js"></script>
    <script>
        AFRAME.registerComponent('color-cycle', {
            schema: {},
            init: function(){
                var self = this;
                this.el.addEventListener('click', function(){
                    var rgb = [
                        Math.floor(Math.random()*255),
                        Math.floor(Math.random()*255),
                        Math.floor(Math.random()*255)
                    ];
                    self.el.setAttribute('color', 'rgb('+rgb.join(',')+')');
                });
            }
        });
    </script>
  </head>
  <body>
    <!-- scene -->
    <a-scene background="color: #E6E8EB" fog="color: #E6E8EB; far: 25; near: 10" renderer="antialias: true" stats>
        <!-- assets -->
        <a-assets>
            <img id="floor-texture" src="./assets/floor.png">
        </a-assets>

        <a-camera look-controls wasd-controls position="0 1.6 0">
            <a-entity cursor="fuse: true; fuseTimeout: 500"
                    position="0 0 -1"
                    geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                    material="color: black; shader: flat">
            </a-entity>
        </a-camera>

        <a-entity laser-controls="hand: left" raycaster="objects: .collidable; far: 20;"></a-entity>
        <a-entity id="hand" laser-controls="hand: right" raycaster="objects: .collidable; far: 20;" line="color: #FF8A7E"></a-entity>

        <!-- content -->

        <!-- floors -->
        <a-box class="collidable" color-cycle height="0.4" width="2" depth="0.4" position="-1 0.5 -3" rotation="0 22.5 0" color="#E0EDFF" shadow="cast: true"></a-box>
        <a-box class="collidable" color-cycle height="0.4" width="2" depth="0.4" position="-1 1 -3" rotation="0 22.5 0" color="#E0EDFF" shadow="cast: true"></a-box>
        <a-box class="collidable" color-cycle height="0.4" width="2" depth="0.4" position="-1 1.5 -3" rotation="0 22.5 0" color="#E0EDFF" shadow="cast: true"></a-box>
        <a-box class="collidable" color-cycle height="0.4" width="2" depth="0.4" position="-1 2 -3" rotation="0 22.5 0" color="#E0EDFF" shadow="cast: true"></a-box>
        <a-box class="collidable" color-cycle height="0.4" width="2" depth="0.4" position="-1 2.5 -3" rotation="0 22.5 0" color="#E0EDFF" shadow="cast: true"></a-box>

        <!-- que -->
        <a-sphere color="#267EFF" radius="0.15" position="1 1 -3" segments-height="5" segments-width="5" shadow="cast: true"></a-sphere>
        <a-cone color="#267EFF" radius-bottom="0" radius-top="0.2" height="0.5" position="1 0.5 -3" segments-height="1" segments-radial="5" shadow="cast: true"></a-cone>

        <a-sphere color="#267EFF" radius="0.1" position="1.5 0.8 -2.5" segments-height="5" segments-width="5" shadow="cast: true"></a-sphere>
        <a-cone color="#267EFF" radius-bottom="0" radius-top="0.1" height="0.3" position="1.5 0.5 -2.5" segments-height="1" segments-radial="5" shadow="cast: true"></a-cone>

        <!-- mews logo -->

        <!-- hotel logo -->


        <a-entity id="mouseCursor" cursor="rayOrigin: mouse"></a-entity>
        <a-entity id="keyboard" super-keyboard="hand: #hand; imagePath:./assets/keyboard" position="0 1.076 -0.5" rotation="-30 0 0"></a-entity>
        <!-- <a-box position="1 0.5 -3" rotation="0 -45 0" color="#F8B3BE" shadow="cast: true"></a-box> -->

        <!-- floor -->
        <a-plane
            position="0 00"
            rotation="-90 0 0"
            width="100"
            height="100"
            color="#FFFFF"
            shadow="receive: true"
            material="src: #floor-texture; repeat: 200 200"
        ></a-plane>

        <!-- debug -->
        <a-entity log geometry="primitive: plane" material="color: #111" text="color: lightgreen" position="0 1.6 -2"></a-entity>
    </a-scene>

    <script>
        window.initState();
        window.initKeyboard();
        // window.signIn();
    </script>
  </body>
</html>